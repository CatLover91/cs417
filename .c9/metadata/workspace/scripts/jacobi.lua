{"changed":true,"filter":false,"title":"jacobi.lua","tooltip":"/scripts/jacobi.lua","value":"from pprint import pprint\nfrom numpy import array, zeros, diag, diagflat, dot\n\ndef jacobi(A,b,N=25,x=None):\n    \"\"\"Solves the equation Ax=b via the Jacobi iterative method.\"\"\"\n    # Create an initial guess if needed                                                                                                                                                            \n    if x is None:\n        x = zeros(len(A[0]))\n\n    # Create a vector of the diagonal elements of A                                                                                                                                                \n    # and subtract them from A                                                                                                                                                                     \n    D = diag(A)\n    R = A - diagflat(D)\n\n    # Iterate for N times                                                                                                                                                                          \n    for i in range(N):\n        x = (b - dot(R,x)) / D\n    return x\n\nA = array([[2.0,1.0],[5.0,7.0]])\nb = array([11.0,13.0])\nguess = array([1.0,1.0])\n\nsol = jacobi(A,b,N=25,x=guess)\n\nprint \"A:\"\npprint(A)\n\nprint \"b:\"\npprint(b)\n\nprint \"x:\"\npprint(sol)","undoManager":{"mark":99,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":32,"column":5},"end":{"row":32,"column":6},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":32,"column":6},"end":{"row":32,"column":7},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":32,"column":7},"end":{"row":33,"column":0},"action":"insert","lines":["",""]},{"start":{"row":33,"column":0},"end":{"row":33,"column":4},"action":"insert","lines":["    "]},{"start":{"row":32,"column":0},"end":{"row":32,"column":4},"action":"remove","lines":["    "]},{"start":{"row":33,"column":0},"end":{"row":33,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":25},"end":{"row":1,"column":26},"action":"remove","lines":["x"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":24},"end":{"row":1,"column":25},"action":"remove","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":24},"end":{"row":1,"column":25},"action":"insert","lines":[":"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":25},"end":{"row":1,"column":26},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":26},"end":{"row":1,"column":27},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":27},"end":{"row":1,"column":28},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":28},"end":{"row":1,"column":29},"action":"insert","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":44},"end":{"row":1,"column":45},"action":"remove","lines":["y"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":43},"end":{"row":1,"column":44},"action":"remove","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":43},"end":{"row":1,"column":44},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":44},"end":{"row":1,"column":45},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":45},"end":{"row":1,"column":46},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":45},"end":{"row":1,"column":46},"action":"remove","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":44},"end":{"row":1,"column":45},"action":"remove","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":43},"end":{"row":1,"column":44},"action":"remove","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":43},"end":{"row":1,"column":44},"action":"insert","lines":[":"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":44},"end":{"row":1,"column":45},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":45},"end":{"row":1,"column":46},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":46},"end":{"row":1,"column":47},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":47},"end":{"row":1,"column":48},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":21},"end":{"row":17,"column":22},"action":"insert","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":11},"end":{"row":17,"column":12},"action":"insert","lines":["("]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":10},"end":{"row":17,"column":11},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":19},"end":{"row":23,"column":20},"action":"remove","lines":["("]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":18},"end":{"row":23,"column":19},"action":"remove","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":17},"end":{"row":23,"column":18},"action":"remove","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":17},"end":{"row":23,"column":18},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":18},"end":{"row":23,"column":19},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":20},"end":{"row":23,"column":21},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":22},"end":{"row":23,"column":23},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":24},"end":{"row":23,"column":25},"action":"remove","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":19},"end":{"row":23,"column":20},"action":"remove","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":19},"end":{"row":23,"column":20},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":20},"end":{"row":23,"column":21},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":21},"end":{"row":23,"column":22},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":22},"end":{"row":23,"column":23},"action":"insert","lines":["M"]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":19},"end":{"row":23,"column":23},"action":"remove","lines":["theM"]},{"start":{"row":23,"column":19},"end":{"row":23,"column":28},"action":"insert","lines":["theMatrix"]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":28},"end":{"row":23,"column":29},"action":"insert","lines":[":"]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":29},"end":{"row":23,"column":30},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":30},"end":{"row":23,"column":31},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":31},"end":{"row":23,"column":32},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":32},"end":{"row":23,"column":33},"action":"insert","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":33},"end":{"row":23,"column":34},"action":"insert","lines":["("]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":34},"end":{"row":23,"column":35},"action":"insert","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":24},"end":{"row":24,"column":25},"action":"remove","lines":["X"]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":23},"end":{"row":24,"column":24},"action":"remove","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":23},"end":{"row":24,"column":24},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":24},"end":{"row":24,"column":25},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":25},"end":{"row":24,"column":26},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":26},"end":{"row":24,"column":27},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":26},"end":{"row":24,"column":27},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":26},"end":{"row":24,"column":27},"action":"insert","lines":["M"]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":27},"end":{"row":24,"column":28},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":28},"end":{"row":24,"column":29},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":29},"end":{"row":24,"column":30},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":30},"end":{"row":24,"column":31},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":31},"end":{"row":24,"column":32},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":31},"end":{"row":24,"column":32},"action":"remove","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":31},"end":{"row":24,"column":32},"action":"insert","lines":["x"]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":32},"end":{"row":24,"column":33},"action":"insert","lines":[":"]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":33},"end":{"row":24,"column":34},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":34},"end":{"row":24,"column":35},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":35},"end":{"row":24,"column":36},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":36},"end":{"row":24,"column":37},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":37},"end":{"row":24,"column":38},"action":"insert","lines":["("]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":38},"end":{"row":24,"column":39},"action":"insert","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":25,"column":26},"end":{"row":25,"column":27},"action":"remove","lines":["X"]}]}],[{"group":"doc","deltas":[{"start":{"row":25,"column":25},"end":{"row":25,"column":26},"action":"remove","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":25,"column":25},"end":{"row":25,"column":26},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":25,"column":26},"end":{"row":25,"column":27},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":25,"column":27},"end":{"row":25,"column":28},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":25,"column":28},"end":{"row":25,"column":29},"action":"insert","lines":["M"]}]}],[{"group":"doc","deltas":[{"start":{"row":25,"column":25},"end":{"row":25,"column":29},"action":"remove","lines":["theM"]},{"start":{"row":25,"column":25},"end":{"row":25,"column":34},"action":"insert","lines":["theMatrix"]}]}],[{"group":"doc","deltas":[{"start":{"row":25,"column":34},"end":{"row":25,"column":35},"action":"insert","lines":[":"]}]}],[{"group":"doc","deltas":[{"start":{"row":25,"column":35},"end":{"row":25,"column":36},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":25,"column":36},"end":{"row":25,"column":37},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":25,"column":37},"end":{"row":25,"column":38},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":25,"column":38},"end":{"row":25,"column":39},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":25,"column":39},"end":{"row":25,"column":40},"action":"insert","lines":["("]}]}],[{"group":"doc","deltas":[{"start":{"row":25,"column":40},"end":{"row":25,"column":41},"action":"insert","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":87},"end":{"row":26,"column":88},"action":"remove","lines":["X"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":86},"end":{"row":26,"column":87},"action":"remove","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":86},"end":{"row":26,"column":87},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":87},"end":{"row":26,"column":88},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":88},"end":{"row":26,"column":89},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":89},"end":{"row":26,"column":90},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":89},"end":{"row":26,"column":90},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":89},"end":{"row":26,"column":90},"action":"insert","lines":["M"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":86},"end":{"row":26,"column":90},"action":"remove","lines":["theM"]},{"start":{"row":26,"column":86},"end":{"row":26,"column":95},"action":"insert","lines":["theMatrix"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":95},"end":{"row":26,"column":96},"action":"insert","lines":[":"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":96},"end":{"row":26,"column":97},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":97},"end":{"row":26,"column":98},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":98},"end":{"row":26,"column":99},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":99},"end":{"row":26,"column":100},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":100},"end":{"row":26,"column":101},"action":"insert","lines":["("]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":101},"end":{"row":26,"column":102},"action":"insert","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":113},"end":{"row":26,"column":115},"action":"remove","lines":["nX"]},{"start":{"row":26,"column":113},"end":{"row":26,"column":129},"action":"insert","lines":["theMatrix:ncol()"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":33,"column":0},"action":"remove","lines":["function jacobi(theMatrix)","    local ij = theMatrix:nrow() * theMatrix:ncol()","","    local a = theMatrix.toArray()","    local b = theMatrix.toArrayB()","","    -- Set initial guess to be identically zero","","    local u = Array.new(ij, 0)","    local v = Array.new(ij, 0)","","    logError(\"jacobi out\", u, 0)","","    -- Carry out Jacobi iterations","    for k = 1, totaliters do","","        -- Alternately flip input and output matrices","        if(k % 2 == 0)","            a, b = u, v","        else","            a, b = v, u","        end","        -- Compute Jacobi iteration","        for j = 1, theMatrix:nrow() - 1 do","            for i = 1, theMatrix:ncol() - 1 do","                ij = i + theMatrix:ncol() * j","                a[ij] = (f(i,j) + dxxinv * (b[ij - 1] + b[ij + 1]) + dyyinv * (b[ij - theMatrix:ncol()] + b[ij + theMatrix:ncol()])) * d cent;","            end","        end","        -- Save and compute error if necessary","        logError(\"jacobi out\", a, k)","    end","end",""]},{"start":{"row":0,"column":0},"end":{"row":32,"column":11},"action":"insert","lines":["from pprint import pprint","from numpy import array, zeros, diag, diagflat, dot","","def jacobi(A,b,N=25,x=None):","    \"\"\"Solves the equation Ax=b via the Jacobi iterative method.\"\"\"","    # Create an initial guess if needed                                                                                                                                                            ","    if x is None:","        x = zeros(len(A[0]))","","    # Create a vector of the diagonal elements of A                                                                                                                                                ","    # and subtract them from A                                                                                                                                                                     ","    D = diag(A)","    R = A - diagflat(D)","","    # Iterate for N times                                                                                                                                                                          ","    for i in range(N):","        x = (b - dot(R,x)) / D","    return x","","A = array([[2.0,1.0],[5.0,7.0]])","b = array([11.0,13.0])","guess = array([1.0,1.0])","","sol = jacobi(A,b,N=25,x=guess)","","print \"A:\"","pprint(A)","","print \"b:\"","pprint(b)","","print \"x:\"","pprint(sol)"]}]}]]},"ace":{"folds":[],"scrolltop":75,"scrollleft":0,"selection":{"start":{"row":32,"column":11},"end":{"row":32,"column":11},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":4,"state":"start","mode":"ace/mode/lua"}},"timestamp":1430163741840}